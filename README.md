# Version

[A plugin for Typecho Blog Platform(一款Typecho博客平台的插件)](https://github.com/innc11/Version)

对文章增加简单的历史记录功能(包括文章和独立页面)，点击保存或者发布时就会被记录下来，可以通过编辑界面右侧的选项卡进行切换(位于**选项**和**附件**的旁边)

## 使用说明

1. 将放在插件目录中，确保文件夹名为 `Version`
2. 启用插件

### 记录

插件会自动记录文章和独立页面修改，点击**保存草稿**和**发布文章**时都会被记录，无需手动操作，另外每十分钟的自动保存版本会以蓝色字体出现(看图片中)，此版本的标签不可编辑，且在手动点击**保存草稿**和**发布文章**时会被自动删除

### 回退

1. 在文章编辑页点击右侧选项卡进行切换到历史版本窗口
2. 点击某个时间点可以进行回滚、预览和删除

按钮说明：

1. **“回”：** 回退到这个版本
2. **”阅”：** 预览这个版本的内容（内容以< ! - - markdown - - >开头为正常现象）
3. **”删”：** 从数据库删除这个版本

### 删除

可以在"历史版本"界面手动删除，或当文章被删除时，所有的记录也会一起被删除

### 标签

1.2版本开始可以给每一个历史版本添加一个标签便于记忆，将鼠标放在对应的记录上，时间会变成标签框，直接编辑即可，按Enter或者失去焦点后会自动保存

## 注意事项

1. 只能记录插件安装之后的修改记录
2. 插件禁用时默认不会删除所记录的数据，如果需要可以在配置界面进行配置
3. 回退文章内容时页面会刷新并覆盖掉编辑器的内容

## 图片

#### 预览1

![overview2](https://res.innc11.cn/pictures/version/2020-07-26152730.png)

#### 预览2

![overview](https://res.innc11.cn/pictures/version/QQ20200726152008.png)

## 版本历史

特别说明：1.0、1.1、11.2、1.2.1版本之间互不兼容(因为改动挺大的)

- 1.0 (20-7-25)
  - 首次发布
- 1.1 (20-7-25)
  - 支持预览功能
  - 优化部分代码
  - 修复一个草稿相关的问题
- 1.2 (20-7-26)
  - 支持版本标签功能
  - 修改界面样式和说明文字
- 1.2.1 (20-7-26)
  - 删除文章时会一起删除所有相关的记录
- 1.2.2 (20-7-26)
  - 解决重复保存的问题

## 代码参考

1. [Typecho项目](https://github.com/typecho/typecho)
2. [Access访问记录插件](https://github.com/kokororin/typecho-plugin-Access)
2. [Link友链插件](http://www.imhan.com/archives/typecho-links)
3. [EditorMD编辑器插件](https://dt27.org/php/editormd-for-typecho)
